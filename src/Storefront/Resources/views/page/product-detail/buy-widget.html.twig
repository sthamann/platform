{% block page_product_detail_buy_inner %}
    <div class="product-detail-buy js-magnifier-zoom-image-container">
        {% block page_product_detail_rich_snippets %}
            {% block page_product_detail_rich_snippets_brand %}
                <meta itemprop="brand"
                      content="{{ page.product.manufacturer.translated.name }}"/>
            {% endblock %}

            {% block page_product_detail_rich_snippets_gtin13 %}
                {% if page.product.ean %}
                    <meta itemprop="gtin13"
                          content="{{ page.product.ean }}"/>
                {% endif %}
            {% endblock %}

            {% block page_product_detail_rich_snippets_mpn %}
                <meta itemprop="mpn"
                      content="{{ page.product.productNumber }}"/>
            {% endblock %}

            {% block page_product_detail_rich_snippets_weight %}
                <meta itemprop="weight"
                      content="{{ page.product.weight }} kg"/>
            {% endblock %}

            {% block page_product_detail_rich_snippets_height %}
                <meta itemprop="height"
                      content="{{ page.product.height }} mm"/>
            {% endblock %}

            {% block page_product_detail_rich_snippets_width %}
                <meta itemprop="width"
                      content="{{ page.product.width }} mm"/>
            {% endblock %}

            {% block page_product_detail_rich_snippets_depth %}
                <meta itemprop="depth"
                      content="{{ page.product.length }} mm"/>
            {% endblock %}

            {% block page_product_detail_rich_snippets_release_date %}
                <meta itemprop="releaseDate"
                      content="{{ page.product.releaseDate|localizeddate('short', 'none', app.request.locale) }}"/>
            {% endblock %}
        {% endblock %}

        {% block page_product_detail_not_available %}
            {#TODO: NEXT-2784 - product not available message#}
        {% endblock %}

        {% block page_product_detail_buy_container %}
            <div itemprop="offers"
                 itemscope
                 itemtype="https://schema.org/Offer">
                {% block page_product_detail_data %}
                    <meta itemprop="priceCurrency"
                          content="{{ page.context.currency.translated.shortName }}"/>

                    {% block page_product_detail_price %}
                        <div class="product-detail-price-container">
                            {% sw_include '@Storefront/page/product-detail/buy-widget-price.html.twig' %}
                        </div>
                    {% endblock %}

                    {% block page_product_detail_tax %}
                        <div class="product-detail-tax-container">
                            <p class="product-detail-tax"
                               data-toggle="modal"
                               data-url="{{ path('widgets.cms.page',{ id: shopware.config.cms.taxCmsPageId }) }}">
                                {% if context.taxState == "gross" %}
                                    {{ "general.grossTaxInformation"|trans }}
                                {% else %}
                                    {{ "general.netTaxInformation"|trans }}
                                {% endif %}
                            </p>
                        </div>
                    {% endblock %}

					{% block page_product_detail_reviews %}
                        {#TODO: Replace with real product rating data#}
                        <div class="product-detail-reviews-wrapper">
                            {% set productRatingAvg = page.product.ratingAverage %}
                            {% set productRatingCount = page.reviews|length %}
                            {% if productRatingCount > 0 %}
                                <p class="product-detail-reviews">
                                    <span class="product-detail-reviews-stars-block">
                                        <strong class="product-detail-reviews-average">{{ productRatingAvg|round(1) }}</strong>
                                        {% sw_include '@Storefront/component/review/rating.html.twig' with {
                                            points: productRatingAvg,
                                            style: 'text-primary'
                                        } %}
                                    </span>
                                    <a data-toggle="tab" class="product-detail-reviews-link" data-offcanvas-tab="true" href="#review-tab-pane" aria-controls="review-tab-pane">{{ "detail.reviewLinkText"|trans({'%count%': productRatingCount }) }}</a>
                                </p>
                            {% endif %}
                        </div>
					{% endblock %}

                    {% block page_product_detail_delivery_informations %}
                        <div class="product-detail-delivery-information">
                            {% sw_include '@Storefront/component/delivery-information.html.twig' %}
                        </div>
                    {% endblock %}
                {% endblock %}

                {% block page_product_detail_buy_form %}
                    {% if page.product.active %}
                        <div class="product-detail-form-container">
                            {% sw_include '@Storefront/page/product-detail/buy-widget-form.html.twig' %}
                        </div>
                    {% endif %}
                {% endblock %}
            </div>
        {% endblock %}

        {% block page_product_detail_ordernumber_container %}
            {% if page.product.productNumber %}
                <div class="product-detail-ordernumber-container">
                    {% block page_product_detail_ordernumber_label %}
                        <span class="product-detail-ordernumber-label">
                            {{ "detail.ordernumberLabel"|trans }}
                        </span>
                    {% endblock %}

                    {% block page_product_detail_ordernumber %}
                        <meta itemprop="productID"
                              content="{{ page.product.id }}"/>
                        <span class="product-detail-ordernumber"
                              itemprop="sku">
                            {{ page.product.productNumber }}
                        </span>
                    {% endblock %}
                </div>
            {% endif %}
        {% endblock %}
    </div>
{% endblock %}
